{"version":3,"sources":["components/SearchCityForm/styles.module.scss","store/types.js","store/weather/reducer.js","store/rootReducer.js","store/weather/actions.js","store/configureStore.js","ListsContext.tsx","components/ WeatherCard/WeatherCard.tsx","components/Loading.js","components/withFetch.js","components/SearchCityForm/SearchCityForm.tsx","pages/WeatherPage.tsx","containers/WeatherContainer.js","components/App.tsx","serviceWorker.js","index.js"],"names":["module","exports","APPID","initialState","isFetching","error","cities","citiesSearchMatch","rootReducer","combineReducers","weather","state","action","type","filter","city","id","payload","getWeather","url","dispatch","fetch","then","response","json","console","log","list","store","createStore","compose","applyMiddleware","thunk","logger","window","__REDUX_DEVTOOLS_EXTENSION__","citiesFromLocalStorage","JSON","parse","localStorage","getItem","initialCities","length","join","subscribe","selectedCitiesId","getState","map","setItem","stringify","initialTodos","Date","now","title","todos","text","completed","ListsContext","React","createContext","Row","styled","div","Temp","Detail","ul","WeatherCard","props","idList","deleteList","Card","style","background","margin","maxWidth","width","CardContent","Typography","variant","component","name","IconButton","aria-label","onClick","Math","round","main","temp","src","icon","alt","className","feels_like","wind","speed","humidity","pressure","Container","Loading","CircularProgress","withFetch","Cmp","results","data","ok","Error","statusText","this","setState","fetchData","Component","FormWrap","SearchCityForm","cityInput","searchCity","e","preventDefault","cytiesList","wordToMatch","regex","RegExp","place","match","findMatches","current","value","replace","index","searchCitiesMatch","displayMatches","selectCity","addList","createRef","bind","Form","onSubmit","FormGroup","controlId","InputGroup","RootRef","rootRef","FormControl","placeholder","autoComplete","Append","Button","color","styles","suggestions","key","dangerouslySetInnerHTML","__html","Title","h1","WeatherPage","createList","textAlign","marginTop","Provider","connect","newList","newCityId","newCitiesId","concat","citiesList","Wrapper","section","App","WeatherContainer","path","exact","Boolean","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.9bb9a0c2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"suggestions\":\"styles_suggestions__3O27_\"};","// LocalStorage\nexport const STORAGE_KEY = 'WEATHER'\nexport const APPID = '3897463698fab29cbf0f47eca9ac50d5'\n// List\nexport const CREATE_LIST = 'LIST/CREATE_LIST'\nexport const DELETE_LIST = 'LIST/DELETE_LIST'\n//Weather\nexport const GET_WEATHER_REQUEST = 'WEATHER/GET_WEATHER_REQUEST'\nexport const GET_WEATHER_SUCCESS = 'WEATHER/GET_WEATHER_SUCCESS'\nexport const GET_WEATHER_FAILURE = 'WEATHER/GET_WEATHER_FAILURE'\nexport const MATCH_CITIES = 'WEATHER/MATCH_CITIES'\n","import { DELETE_LIST, GET_WEATHER_REQUEST, GET_WEATHER_SUCCESS, GET_WEATHER_FAILURE, MATCH_CITIES } from '../types.js'\n\nconst initialState = {\n    isFetching: false,\n    error: '',\n    cities: [],\n    citiesSearchMatch: []\n}\n\nexport const weatherReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case DELETE_LIST:\n            return {\n                ...state,\n                cities: state.cities.filter(city => city.id !== action.payload)\n            }\n        case GET_WEATHER_REQUEST:\n            return { ...state, isFetching: true }\n        case GET_WEATHER_SUCCESS:\n            return { ...state, isFetching: false, cities: action.payload.cities }\n        case GET_WEATHER_FAILURE:\n            return { ...state, isFetching: false, error: action.payload }\n        case MATCH_CITIES:\n            return { ...state, citiesSearchMatch: action.payload }\n        default: return state\n    }\n}","import { combineReducers } from 'redux'\nimport { weatherReducer as weather } from './weather/reducer'\n\nexport const rootReducer = combineReducers({\n    weather\n})","import { APPID, STORAGE_KEY, DELETE_LIST, GET_WEATHER_REQUEST, GET_WEATHER_SUCCESS, GET_WEATHER_FAILURE, MATCH_CITIES } from '../types.js'\n// List \nexport const createList = (newCityId) => {\n    const citiesFromLocalStorage = JSON.parse((localStorage.getItem(STORAGE_KEY)))\n    const newCitiesId = citiesFromLocalStorage.concat(newCityId)\n    const url = `http://api.openweathermap.org/data/2.5/group?id=${newCitiesId.join()}&units=metric&appid=${APPID}`\n    return dispatch => {\n        dispatch(getWeather(url))\n    }\n}\n\nexport const deleteList = (id) => {\n    return {\n        type: DELETE_LIST,\n        payload: id\n    }\n}\n\nexport const searchCitiesMatch = (cytiesList) => {\n    return {\n        type: MATCH_CITIES,\n        payload: cytiesList\n    }\n}\n\nexport const getWeather = (url) => {\n    return dispatch => {\n        dispatch({\n            type: GET_WEATHER_REQUEST\n        })\n        try {\n            fetch(url)\n                .then(response => response.json())\n                .then(json => {\n                    console.log(url)\n                    dispatch({\n                        type: GET_WEATHER_SUCCESS,\n                        payload: {\n                            cities: json.list\n                        }\n                    })\n                })\n                // .catch(error =>\n                //     dispatch({\n                //         type: GET_WEATHER_FAILURE,\n                //         payload: error\n                //     })\n                // )\n        }\n        catch (error) {\n            dispatch({\n                type: GET_WEATHER_FAILURE,\n                payload: error\n            })\n        }\n    }\n}\n\n","import { compose, createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport logger from 'redux-logger'\nimport { rootReducer } from './rootReducer'\nimport { STORAGE_KEY } from './types'\nimport { APPID } from './types'\nimport { getWeather } from './weather/actions'\n\nexport const store = createStore(rootReducer,\n    compose(applyMiddleware(thunk, logger), window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n)\n\nconst citiesFromLocalStorage = JSON.parse((localStorage.getItem(STORAGE_KEY)))\nconst initialCities = citiesFromLocalStorage && citiesFromLocalStorage.length !== 0 ? citiesFromLocalStorage : [524901, 703448, 2643743]\nconst url = `http://api.openweathermap.org/data/2.5/group?id=${initialCities.join()}&units=metric&appid=${APPID}`\nstore.dispatch(getWeather(url))\n\n/* Save to LocalStorage */\nstore.subscribe(() => {\n    const selectedCitiesId = store.getState().weather.cities.map(city => city.id)\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(selectedCitiesId))\n})","import React from 'react';\n\nconst initialTodos: any = [{\n  id: Date.now(),\n  title: 'Москва',\n  todos: [\n    {\n      id: Date.now(),\n      text: 'Ветер',\n      completed: false\n    }]\n}];\n\nconst ListsContext = React.createContext(initialTodos);\n\nexport default ListsContext;","import React, { FC } from \"react\";\nimport styled from 'styled-components'\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton'\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\n\ntype TodoListProps = {\n  weather: any\n  idList: string | number\n  deleteList: (idList: number | string) => void\n}\nconst Row = styled.div`\n  display:flex;\n  flex-direction:row;\n  justify-content: space-between;\n  align-items: center;\n    img {\n        width: 30%;\n    }\n`;\nconst Temp = styled.div`\n font-size:3rem;\n font-weight:bold;\n`;\n\nconst Detail = styled.ul`\n list-style:none;\n padding-left:0;\n  li {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n      span {\n        font-size:.8rem;\n        }\n }\n`;\n\nconst WeatherCard: FC<TodoListProps> = (props) => {\n  const { weather, idList, deleteList } = props\n  return (\n    <Card style={{ background: 'rgba(255, 255, 255, .7)', margin: '35px 40px', maxWidth: '320px', width: '320px' }}>\n      <CardContent>\n        <Row>\n          <Typography variant=\"h6\" component=\"h2\">\n            {weather.name}\n          </Typography>\n          <IconButton aria-label=\"delete\" onClick={() => deleteList(idList)}>\n            <CloseIcon />\n          </IconButton>\n        </Row>\n        <Row>\n          <Temp>\n            {Math.round(weather.main.temp)}°C\n          </Temp>\n          <img src={`//openweathermap.org/themes/openweathermap/assets/vendor/owm/img/widgets/${weather.weather[0].icon}.png`} alt=\"weather\" />\n        </Row>\n        <div className=\"details\">\n          <hr />\n          <h6>Details</h6>\n          <Detail>\n            <li>\n              <span>Feels like:</span>\n              {weather.main.feels_like}°C\n            </li>\n            <li>\n              <span>Wind:</span>\n              {weather.wind.speed}m/s\n            </li>\n            <li>\n              <span>Humidity:</span>\n              {weather.main.humidity}%\n            </li>\n            <li>\n              <span>Pressure:</span>\n              {weather.main.pressure}hPa\n            </li>\n          </Detail>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default WeatherCard;","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    width:100%;\n    height:50vh;\n`;\nexport const Loading = () => {\n    return (\n        <Container>\n            <CircularProgress />\n        </Container>\n    )\n}","import React from \"react\";\n// HOC\nconst withFetch = props => {\n    return (Cmp) => class WithFetch extends React.Component {\n        constructor() {\n            super();\n            this.state = {\n                results: []\n            };\n        }\n        async fetchData() {\n            try {\n                const data = await fetch(props.url)\n                if (!data.ok) {\n                    throw Error(data.statusText)\n                }\n                const json = await data.json()\n                if (json) {\n                    this.setState({\n                        results: json\n                    });\n                }\n            } catch (error) {\n                console.error(error);\n            }\n        }\n        async componentDidMount() {\n            this.fetchData();\n        }\n        render() {\n            const { results } = this.state;\n            return (\n                <Cmp results={results} {...this.props} />\n            )\n        }\n    }\n}\n\nexport default withFetch;","import React, { Component } from \"react\"\nimport RootRef from '@material-ui/core/RootRef'\nimport Form from 'react-bootstrap/Form'\nimport FormGroup from 'react-bootstrap/FormGroup'\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport FormControl from 'react-bootstrap/FormControl'\nimport Button from '@material-ui/core/Button'\nimport withFetch from '../withFetch'\nimport styles from './styles.module.scss'\nimport styled from 'styled-components'\nimport { IStateSearch, IPropsSearch } from '../../interfaces';\n\nconst FormWrap = styled.div`\n  width:320px;\n  margin: 0 auto;\n  position:relative;\n    input {\n        background: rgba(255, 255, 255, 0.7);\n        border: none;\n    }\n`;\n\nclass SearchCityForm extends Component<IPropsSearch, IStateSearch> {\n    private cityInput: React.RefObject<HTMLInputElement>\n    constructor(props: IPropsSearch) {\n        super(props);\n        this.cityInput = React.createRef()\n        this.searchCity = this.searchCity.bind(this)\n        this.selectCity = this.selectCity.bind(this)\n    }\n\n    searchCity = (e) => {\n        e.preventDefault()\n        const findMatches = (wordToMatch, cities) => {\n            const regex = new RegExp(wordToMatch, 'gi')\n            return cities.filter(place => {\n                return place.name.match(regex)\n            })\n        }\n\n        const displayMatches = () => {\n            const matchArray = findMatches(this.cityInput.current!.value, this.props.results)\n            const cytiesList = matchArray.map(city => {\n                const regex = new RegExp(this.cityInput.current!.value, 'gi');\n                const cityName = city.name.replace(regex, `<span className=\"hl2\">${this.cityInput.current!.value}</span>`);\n                return { name: cityName, index: city.id }\n            })\n            this.props.searchCitiesMatch(cytiesList)\n        }\n        displayMatches()\n    }\n    selectCity = (index) => {\n        this.props.addList(index)\n        this.cityInput.current!.value = \"\";\n        this.props.searchCitiesMatch([])\n    }\n\n    render() {\n        const { citiesSearchMatch } = this.props\n        return (\n            <FormWrap>\n                <Form onSubmit={(e: any): void => this.searchCity(e)}>\n                    <FormGroup controlId=\"formAddItem\">\n                        <InputGroup className=\"mb-3\" >\n                            <>\n                                <RootRef rootRef={this.cityInput}>\n                                    <FormControl\n                                        placeholder=\"London\"\n                                        autoComplete=\"off\"\n                                    // onChange={(e: any): void => this.searchCity(e)}\n                                    />\n                                </RootRef>\n                                <InputGroup.Append>\n                                    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                                        Search\n                            </Button>\n                                </InputGroup.Append>\n                            </>\n                        </InputGroup>\n                    </FormGroup>\n                    <div className={styles.suggestions}>\n                        {citiesSearchMatch.length > 0 &&\n                            <ul>\n                                {citiesSearchMatch.map(city => {\n                                    return (\n                                        <li key={city.index} onClick={(): void => this.selectCity(city.index)}>\n                                            <span className=\"city_name\" dangerouslySetInnerHTML={{ __html: `${city.name}` }} />\n                                        </li>\n                                    )\n                                })\n                                }\n                            </ul>\n                        }\n                    </div>\n                </Form>\n            </FormWrap>\n        )\n    }\n}\n\nconst url = \"/json/city.list.min.json\"\nexport default withFetch({ url: url })(SearchCityForm)","import React, { FC } from 'react';\nimport ListsContext from '../ListsContext'\nimport WeatherCard from '../components/ WeatherCard/WeatherCard';\nimport styled from 'styled-components'\nimport { Loading } from 'components/Loading';\nimport SearchCityForm from '../components/SearchCityForm/SearchCityForm';\n\nconst Title = styled.h1`\n  color:#000000;\n  text-align:center;\n  width:100%;\n  font-size:2rem;\n  padding-top: 20px;\n`;\n\nconst WeatherPage: FC<any> = (props) => {\n    const { weather, isFetching, error, citiesSearchMatch, createList, deleteList, searchCitiesMatch } = props\n    return (\n        <>\n            <Title>weather</Title>\n            <div style={{ width: '100%', textAlign: 'center', marginTop: '20px' }}>\n                <SearchCityForm addList={createList} citiesSearchMatch={citiesSearchMatch} searchCitiesMatch={searchCitiesMatch} />\n            </div>\n            {(isFetching || error) &&\n                isFetching ? <Loading /> : <div>{error}</div>\n            }\n            {(!isFetching && !error) &&\n                (weather.length === 0) &&\n                <p className=\"center\">While there is no cities</p>\n            }\n            {(!isFetching && !error) &&\n                (weather.length !== 0) &&\n                weather.map(list => {\n                    return (\n                        <ListsContext.Provider\n                            key={list.id}\n                            value={{\n                                list: list\n                            }}>\n                            <WeatherCard idList={list.id}\n                                weather={list}\n                                deleteList={deleteList} />\n                        </ListsContext.Provider>\n                    )\n                })\n            }\n        </>\n    )\n}\n\nexport default WeatherPage;\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { createList, deleteList, searchCitiesMatch } from '../store/weather/actions'\nimport WeatherPage from '../pages/WeatherPage.tsx'\n\nconst WeatherContainer = (props) => {\n    const { weather, isFetching, error, citiesSearchMatch, searchCitiesMatch, createList, deleteList } = props\n    return (\n        <WeatherPage\n            createList={createList}\n            deleteList={deleteList}\n            searchCitiesMatch={searchCitiesMatch}\n            citiesSearchMatch={citiesSearchMatch}\n            weather={weather}\n            isFetching={isFetching}\n            error={error}\n        />\n    )\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        weather: store.weather.cities,\n        isFetching: store.weather.isFetching,\n        error: store.weather.error,\n        citiesSearchMatch:store.weather.citiesSearchMatch\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        createList: (newList) => dispatch(createList(newList)),\n        deleteList: (idList) => dispatch(deleteList(idList)),\n        searchCitiesMatch: (citiesList) => dispatch(searchCitiesMatch(citiesList))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WeatherContainer)","import React from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\nimport styled from 'styled-components'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport WeatherContainer from '../containers/WeatherContainer';\n\nconst Wrapper = styled.section`\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  flex-wrap:wrap;\n`;\n\nexport const App = () => {\n  return (\n    <>\n      <BrowserRouter>\n        <Wrapper>\n          <Switch>\n            <Route component={WeatherContainer} path='/' exact />\n          </Switch>\n        </Wrapper>\n      </BrowserRouter>\n    </>\n  )\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { store } from './store/configureStore'\nimport { App } from './components/App'\nimport './assets/index.css'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}